{% extends "base.html" %}

{% block content %}
<h1 class="text-xl mb-4">Queued Tasks</h1>
{% if queued %}
<table class="min-w-full bg-black">
  <thead>
    <tr>
      <th class="px-4 py-2 text-left">Device</th>
      <th class="px-4 py-2 text-left">Status</th>
    </tr>
  </thead>
  <tbody>
    {% for item in queued %}
    <tr class="border-t border-white">
      <td class="px-4 py-2">{{ item.device.hostname }}</td>
      <td class="px-4 py-2">{{ item.status or 'queued' }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>No queued tasks.</p>
{% endif %}
<hr class="my-4">
<h2 class="text-lg mb-2">Live Session</h2>
<form method="get" action="/tasks/live-session" class="space-x-2">
  <select name="device_id" class="p-1 text-black">
    {% for dev in devices %}
    <option value="{{ dev.id }}">{{ dev.hostname }} ({{ dev.ip }})</option>
    {% endfor %}
  </select>
  <button type="submit" class="bg-blue-600 px-3 py-1">Connect</button>
</form>
{% endblock %}

{% extends "base.html" %}
{% block content %}
<h1 class="text-xl mb-4">Sync Conflicts</h1>
{% if conflicts %}
  {% for dev in conflicts %}
  <h2 class="text-lg mt-4">{{ dev.hostname }}</h2>
  <form method="post" action="/reports/conflicts/{{ dev.id }}">
    <div class="w-full overflow-auto">
    <table class="min-w-full table-fixed text-left">
      <thead>
        <tr>
          <th class="px-4 py-2">Field</th>
          <th class="px-4 py-2">Local</th>
          <th class="px-4 py-2">Cloud</th>
        </tr>
      </thead>
      <tbody>
        {% for c in dev.conflict_data %}
        <tr class="border-t border-gray-700">
          <td class="px-4 py-2">{{ c.field }}</td>
          <td class="px-4 py-2">{{ c.local_value }}</td>
          <td class="px-4 py-2 {% if c.local_value != c.remote_value %}bg-[var(--alert-bg)]{% endif %}">{{ c.remote_value }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    </div>
    <div class="mt-2 space-x-2">
      <button type="submit" name="choice" value="local" class="px-4 py-2 bg-[var(--btn-bg)] hover:bg-[var(--btn-hover)] text-[var(--btn-text)] rounded">Use Local</button>
      <button type="submit" name="choice" value="cloud" class="px-4 py-2 bg-[var(--btn-bg)] hover:bg-[var(--btn-hover)] text-[var(--btn-text)] rounded">Use Cloud</button>
    </div>
  </form>
  {% endfor %}
{% else %}
<p>No conflicts found.</p>
{% endif %}
{% endblock %}

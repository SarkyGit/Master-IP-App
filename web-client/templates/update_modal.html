<div id="modal" class="fixed inset-0 bg-black/50 flex items-center justify-center">
  <div class="bg-[var(--card-bg)] p-4 rounded shadow min-w-[20rem]">
    {% if unsynced %}
    <h1 class="text-xl mb-4 text-red-600">Unsynced Data</h1>
    <p>Please sync with the cloud before attempting an update.</p>
    <div class="text-right mt-2">
      <button type="button" class="px-3 py-1 bg-[var(--btn-bg)] hover:bg-[var(--btn-hover)] text-[var(--btn-text)] rounded" onclick="document.getElementById('modal').innerHTML=''">Close</button>
    </div>
    {% elif message %}
    <p>{{ message }}</p>
    <div class="text-right mt-2">
      <button type="button" class="px-3 py-1 bg-[var(--btn-bg)] hover:bg-[var(--btn-hover)] text-[var(--btn-text)] rounded" onclick="document.getElementById('modal').innerHTML=''">Close</button>
    </div>
    {% else %}
    <h1 class="text-xl mb-2">Updating...</h1>
    <div id="update-error" class="mb-2 hidden bg-red-600 text-white p-2 rounded"></div>
    <p id="update-status" class="mb-2">Fetching update...</p>
    <pre id="update-log" class="h-48 overflow-y-auto bg-black text-green-400 p-2 rounded"></pre>
    <div class="text-right mt-2">
      <button type="button" id="update-close-btn" class="px-3 py-1 bg-[var(--btn-bg)] hover:bg-[var(--btn-hover)] text-[var(--btn-text)] rounded" disabled onclick="document.getElementById('modal').innerHTML=''">Close</button>
      <button type="button" id="update-retry-btn" class="px-3 py-1 ml-2 bg-[var(--btn-bg)] hover:bg-[var(--btn-hover)] text-[var(--btn-text)] rounded hidden">Retry</button>
    </div>
    {% endif %}
  </div>
</div>
{% if not message and not unsynced %}
<script src="/static/js/update.js"></script>
<script>startUpdateSocket();</script>
{% endif %}
